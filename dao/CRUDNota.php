<?php class CRUDNota extends Dao{ public function insert7(nota $nota){date_default_timezone_set("Brazil/East");$now = mktime (date('H'), date('i'), date('s'), date("m")  , date("d"), date("Y"));$nota->setid(null);$nota->setexcluido(0);$nota->setcriado($now);$sql=$this->criaTabela7('tb_nf');$this->execute7($sql, $nota);$sql = 'INSERT INTO tb_nf (`compl`,`cChaveNFe`,`cCodCateg`,`cModFrete`,`nIdNF`,`nIdPedido`,`nIdReceb`,`nIdTransp`,`det`,`nfProdInt`,`cCodItemInt`,`cCodProdInt`,`nCodItem`,`nCodProd`,`prod`,`CFOP`,`EXTIPI`,`NCM`,`cEAN`,`cEANTrib`,`cProd`,`cProdOrig`,`indTot`,`nCMCTotal`,`nCMCUnitario`,`qCom`,`qTrib`,`uCom`,`uTrib`,`vDesc`,`vFrete`,`vOutro`,`vProd`,`vSeg`,`vUnCom`,`vUnTrib`,`xProd`,`xProdOrig`,`ide`,`dCan`,`dEmi`,`dInut`,`dReg`,`dSaiEnt`,`finNFe`,`hEmi`,`hSaiEnt`,`indPag`,`mod`,`nNF`,`serie`,`tpAmb`,`tpNF`,`info`,`cImpAPI`,`dAlt`,`dInc`,`hAlt`,`hInc`,`uAlt`,`uInc`,`nfDestInt`,`cCodCliInt`,`nCodCli`,`nfEmitInt`,`cCodEmpInt`,`nCodEmp`,`pedido`,`titulos`,`cCodIntTitulo`,`cNumTitulo`,`dDtEmissao`,`dDtPrevisao`,`dDtVenc`,`nCodComprador`,`nCodProjeto`,`nCodTitRepet`,`nCodTitulo`,`nCodVendedor`,`nParcela`,`nTotParc`,`nValorTitulo`,`total`,`ICMSTot`,`vBC`,`vBCST`,`vCOFINS`,`vICMS`,`vII`,`vIPI`,`vNF`,`vPIS`,`vST`,`vTotTrib`,`ISSQNtot`,`vISS`,`vServ`,`retTrib`,`vBCIRRF`,`vBCRetPrev`,`vIRRF`,`vRetCOFINS`,`vRetCSLL`,`vRetPIS`,`vRetPrev`,`modificado`,`id`,`excluido`,`criado`) VALUES (:compl,:cChaveNFe,:cCodCateg,:cModFrete,:nIdNF,:nIdPedido,:nIdReceb,:nIdTransp,:det,:nfProdInt,:cCodItemInt,:cCodProdInt,:nCodItem,:nCodProd,:prod,:CFOP,:EXTIPI,:NCM,:cEAN,:cEANTrib,:cProd,:cProdOrig,:indTot,:nCMCTotal,:nCMCUnitario,:qCom,:qTrib,:uCom,:uTrib,:vDesc,:vFrete,:vOutro,:vProd,:vSeg,:vUnCom,:vUnTrib,:xProd,:xProdOrig,:ide,:dCan,:dEmi,:dInut,:dReg,:dSaiEnt,:finNFe,:hEmi,:hSaiEnt,:indPag,:mod,:nNF,:serie,:tpAmb,:tpNF,:info,:cImpAPI,:dAlt,:dInc,:hAlt,:hInc,:uAlt,:uInc,:nfDestInt,:cCodCliInt,:nCodCli,:nfEmitInt,:cCodEmpInt,:nCodEmp,:pedido,:titulos,:cCodIntTitulo,:cNumTitulo,:dDtEmissao,:dDtPrevisao,:dDtVenc,:nCodComprador,:nCodProjeto,:nCodTitRepet,:nCodTitulo,:nCodVendedor,:nParcela,:nTotParc,:nValorTitulo,:total,:ICMSTot,:vBC,:vBCST,:vCOFINS,:vICMS,:vII,:vIPI,:vNF,:vPIS,:vST,:vTotTrib,:ISSQNtot,:vISS,:vServ,:retTrib,:vBCIRRF,:vBCRetPrev,:vIRRF,:vRetCOFINS,:vRetCSLL,:vRetPIS,:vRetPrev,:modificado,:id,:excluido,:criado)';$search = new NotaSearchCriteria();$search->settabela($nota->gettabela());return $this->execute7($sql, $nota);} public function update7(nota $nota){date_default_timezone_set("Brazil/East");$now = mktime (date("H"), date("i"), date("s"), date("m")  , date("d"), date("Y"));$nota->setmodificado($now);$sql = 'UPDATE tb_nf SET id=:id,criado=:criado compl = :compl, cChaveNFe = :cChaveNFe, cCodCateg = :cCodCateg, cModFrete = :cModFrete, nIdNF = :nIdNF, nIdPedido = :nIdPedido, nIdReceb = :nIdReceb, nIdTransp = :nIdTransp, det = :det, nfProdInt = :nfProdInt, cCodItemInt = :cCodItemInt, cCodProdInt = :cCodProdInt, nCodItem = :nCodItem, nCodProd = :nCodProd, prod = :prod, CFOP = :CFOP, EXTIPI = :EXTIPI, NCM = :NCM, cEAN = :cEAN, cEANTrib = :cEANTrib, cProd = :cProd, cProdOrig = :cProdOrig, indTot = :indTot, nCMCTotal = :nCMCTotal, nCMCUnitario = :nCMCUnitario, qCom = :qCom, qTrib = :qTrib, uCom = :uCom, uTrib = :uTrib, vDesc = :vDesc, vFrete = :vFrete, vOutro = :vOutro, vProd = :vProd, vSeg = :vSeg, vUnCom = :vUnCom, vUnTrib = :vUnTrib, xProd = :xProd, xProdOrig = :xProdOrig, ide = :ide, dCan = :dCan, dEmi = :dEmi, dInut = :dInut, dReg = :dReg, dSaiEnt = :dSaiEnt, finNFe = :finNFe, hEmi = :hEmi, hSaiEnt = :hSaiEnt, indPag = :indPag, mod = :mod, nNF = :nNF, serie = :serie, tpAmb = :tpAmb, tpNF = :tpNF, info = :info, cImpAPI = :cImpAPI, dAlt = :dAlt, dInc = :dInc, hAlt = :hAlt, hInc = :hInc, uAlt = :uAlt, uInc = :uInc, nfDestInt = :nfDestInt, cCodCliInt = :cCodCliInt, nCodCli = :nCodCli, nfEmitInt = :nfEmitInt, cCodEmpInt = :cCodEmpInt, nCodEmp = :nCodEmp, pedido = :pedido, titulos = :titulos, cCodIntTitulo = :cCodIntTitulo, cNumTitulo = :cNumTitulo, dDtEmissao = :dDtEmissao, dDtPrevisao = :dDtPrevisao, dDtVenc = :dDtVenc, nCodComprador = :nCodComprador, nCodProjeto = :nCodProjeto, nCodTitRepet = :nCodTitRepet, nCodTitulo = :nCodTitulo, nCodVendedor = :nCodVendedor, nParcela = :nParcela, nTotParc = :nTotParc, nValorTitulo = :nValorTitulo, total = :total, ICMSTot = :ICMSTot, vBC = :vBC, vBCST = :vBCST, vCOFINS = :vCOFINS, vICMS = :vICMS, vII = :vII, vIPI = :vIPI, vNF = :vNF, vPIS = :vPIS, vST = :vST, vTotTrib = :vTotTrib, ISSQNtot = :ISSQNtot, vISS = :vISS, vServ = :vServ, retTrib = :retTrib, vBCIRRF = :vBCIRRF, vBCRetPrev = :vBCRetPrev, vIRRF = :vIRRF, vRetCOFINS = :vRetCOFINS, vRetCSLL = :vRetCSLL, vRetPIS = :vRetPIS, vRetPrev = :vRetPrev, modificado = :modificado WHERE id = :id ';return $this->execute7($sql, $nota);} public function criaTabela7($tabela){$sql="CREATE TABLE IF NOT EXISTS tb_nf ( `id` INT(5) NOT NULL AUTO_INCREMENT , `criado` INT(100) NULL,`compl` varchar(150) NULL,`cChaveNFe` varchar(150) NULL,`cCodCateg` varchar(150) NULL,`cModFrete` varchar(150) NULL,`nIdNF` varchar(150) NULL,`nIdPedido` varchar(150) NULL,`nIdReceb` varchar(150) NULL,`nIdTransp` varchar(150) NULL,`det` varchar(150) NULL,`nfProdInt` varchar(150) NULL,`cCodItemInt` varchar(150) NULL,`cCodProdInt` varchar(150) NULL,`nCodItem` varchar(150) NULL,`nCodProd` varchar(150) NULL,`prod` varchar(150) NULL,`CFOP` varchar(150) NULL,`EXTIPI` varchar(150) NULL,`NCM` varchar(150) NULL,`cEAN` varchar(150) NULL,`cEANTrib` varchar(150) NULL,`cProd` varchar(150) NULL,`cProdOrig` varchar(150) NULL,`indTot` varchar(150) NULL,`nCMCTotal` varchar(150) NULL,`nCMCUnitario` varchar(150) NULL,`qCom` varchar(150) NULL,`qTrib` varchar(150) NULL,`uCom` varchar(150) NULL,`uTrib` varchar(150) NULL,`vDesc` varchar(150) NULL,`vFrete` varchar(150) NULL,`vOutro` varchar(150) NULL,`vProd` varchar(150) NULL,`vSeg` varchar(150) NULL,`vUnCom` varchar(150) NULL,`vUnTrib` varchar(150) NULL,`xProd` varchar(150) NULL,`xProdOrig` varchar(150) NULL,`ide` varchar(150) NULL,`dCan` varchar(150) NULL,`dEmi` varchar(150) NULL,`dInut` varchar(150) NULL,`dReg` varchar(150) NULL,`dSaiEnt` varchar(150) NULL,`finNFe` varchar(150) NULL,`hEmi` varchar(150) NULL,`hSaiEnt` varchar(150) NULL,`indPag` varchar(150) NULL,`mod` varchar(150) NULL,`nNF` varchar(150) NULL,`serie` varchar(150) NULL,`tpAmb` varchar(150) NULL,`tpNF` varchar(150) NULL,`info` varchar(150) NULL,`cImpAPI` varchar(150) NULL,`dAlt` varchar(150) NULL,`dInc` varchar(150) NULL,`hAlt` varchar(150) NULL,`hInc` varchar(150) NULL,`uAlt` varchar(150) NULL,`uInc` varchar(150) NULL,`nfDestInt` varchar(150) NULL,`cCodCliInt` varchar(150) NULL,`nCodCli` varchar(150) NULL,`nfEmitInt` varchar(150) NULL,`cCodEmpInt` varchar(150) NULL,`nCodEmp` varchar(150) NULL,`pedido` varchar(150) NULL,`titulos` varchar(150) NULL,`cCodIntTitulo` varchar(150) NULL,`cNumTitulo` varchar(150) NULL,`dDtEmissao` varchar(150) NULL,`dDtPrevisao` varchar(150) NULL,`dDtVenc` varchar(150) NULL,`nCodComprador` varchar(150) NULL,`nCodProjeto` varchar(150) NULL,`nCodTitRepet` varchar(150) NULL,`nCodTitulo` varchar(150) NULL,`nCodVendedor` varchar(150) NULL,`nParcela` varchar(150) NULL,`nTotParc` varchar(150) NULL,`nValorTitulo` varchar(150) NULL,`total` varchar(150) NULL,`ICMSTot` varchar(150) NULL,`vBC` varchar(150) NULL,`vBCST` varchar(150) NULL,`vCOFINS` varchar(150) NULL,`vICMS` varchar(150) NULL,`vII` varchar(150) NULL,`vIPI` varchar(150) NULL,`vNF` varchar(150) NULL,`vPIS` varchar(150) NULL,`vST` varchar(150) NULL,`vTotTrib` varchar(150) NULL,`ISSQNtot` varchar(150) NULL,`vISS` varchar(150) NULL,`vServ` varchar(150) NULL,`retTrib` varchar(150) NULL,`vBCIRRF` varchar(150) NULL,`vBCRetPrev` varchar(150) NULL,`vIRRF` varchar(150) NULL,`vRetCOFINS` varchar(150) NULL,`vRetCSLL` varchar(150) NULL,`vRetPIS` varchar(150) NULL,`vRetPrev` varchar(150) NULL,`modificado` varchar(150) NULL, `excluido` ENUM('0','1') NOT NULL DEFAULT '0', PRIMARY KEY (`id`)) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci";return $sql;} public function getParams7(nota $nota){$params = array(':id'=>$nota->getid(),':excluido'=>$nota->getexcluido(),':criado'=>$nota->getcriado(),':compl'=>$nota->getcompl(),':cChaveNFe'=>$nota->getcChaveNFe(),':cCodCateg'=>$nota->getcCodCateg(),':cModFrete'=>$nota->getcModFrete(),':nIdNF'=>$nota->getnIdNF(),':nIdPedido'=>$nota->getnIdPedido(),':nIdReceb'=>$nota->getnIdReceb(),':nIdTransp'=>$nota->getnIdTransp(),':det'=>$nota->getdet(),':nfProdInt'=>$nota->getnfProdInt(),':cCodItemInt'=>$nota->getcCodItemInt(),':cCodProdInt'=>$nota->getcCodProdInt(),':nCodItem'=>$nota->getnCodItem(),':nCodProd'=>$nota->getnCodProd(),':prod'=>$nota->getprod(),':CFOP'=>$nota->getCFOP(),':EXTIPI'=>$nota->getEXTIPI(),':NCM'=>$nota->getNCM(),':cEAN'=>$nota->getcEAN(),':cEANTrib'=>$nota->getcEANTrib(),':cProd'=>$nota->getcProd(),':cProdOrig'=>$nota->getcProdOrig(),':indTot'=>$nota->getindTot(),':nCMCTotal'=>$nota->getnCMCTotal(),':nCMCUnitario'=>$nota->getnCMCUnitario(),':qCom'=>$nota->getqCom(),':qTrib'=>$nota->getqTrib(),':uCom'=>$nota->getuCom(),':uTrib'=>$nota->getuTrib(),':vDesc'=>$nota->getvDesc(),':vFrete'=>$nota->getvFrete(),':vOutro'=>$nota->getvOutro(),':vProd'=>$nota->getvProd(),':vSeg'=>$nota->getvSeg(),':vUnCom'=>$nota->getvUnCom(),':vUnTrib'=>$nota->getvUnTrib(),':xProd'=>$nota->getxProd(),':xProdOrig'=>$nota->getxProdOrig(),':ide'=>$nota->getide(),':dCan'=>$nota->getdCan(),':dEmi'=>$nota->getdEmi(),':dInut'=>$nota->getdInut(),':dReg'=>$nota->getdReg(),':dSaiEnt'=>$nota->getdSaiEnt(),':finNFe'=>$nota->getfinNFe(),':hEmi'=>$nota->gethEmi(),':hSaiEnt'=>$nota->gethSaiEnt(),':indPag'=>$nota->getindPag(),':mod'=>$nota->getmod(),':nNF'=>$nota->getnNF(),':serie'=>$nota->getserie(),':tpAmb'=>$nota->gettpAmb(),':tpNF'=>$nota->gettpNF(),':info'=>$nota->getinfo(),':cImpAPI'=>$nota->getcImpAPI(),':dAlt'=>$nota->getdAlt(),':dInc'=>$nota->getdInc(),':hAlt'=>$nota->gethAlt(),':hInc'=>$nota->gethInc(),':uAlt'=>$nota->getuAlt(),':uInc'=>$nota->getuInc(),':nfDestInt'=>$nota->getnfDestInt(),':cCodCliInt'=>$nota->getcCodCliInt(),':nCodCli'=>$nota->getnCodCli(),':nfEmitInt'=>$nota->getnfEmitInt(),':cCodEmpInt'=>$nota->getcCodEmpInt(),':nCodEmp'=>$nota->getnCodEmp(),':pedido'=>$nota->getpedido(),':titulos'=>$nota->gettitulos(),':cCodIntTitulo'=>$nota->getcCodIntTitulo(),':cNumTitulo'=>$nota->getcNumTitulo(),':dDtEmissao'=>$nota->getdDtEmissao(),':dDtPrevisao'=>$nota->getdDtPrevisao(),':dDtVenc'=>$nota->getdDtVenc(),':nCodComprador'=>$nota->getnCodComprador(),':nCodProjeto'=>$nota->getnCodProjeto(),':nCodTitRepet'=>$nota->getnCodTitRepet(),':nCodTitulo'=>$nota->getnCodTitulo(),':nCodVendedor'=>$nota->getnCodVendedor(),':nParcela'=>$nota->getnParcela(),':nTotParc'=>$nota->getnTotParc(),':nValorTitulo'=>$nota->getnValorTitulo(),':total'=>$nota->gettotal(),':ICMSTot'=>$nota->getICMSTot(),':vBC'=>$nota->getvBC(),':vBCST'=>$nota->getvBCST(),':vCOFINS'=>$nota->getvCOFINS(),':vICMS'=>$nota->getvICMS(),':vII'=>$nota->getvII(),':vIPI'=>$nota->getvIPI(),':vNF'=>$nota->getvNF(),':vPIS'=>$nota->getvPIS(),':vST'=>$nota->getvST(),':vTotTrib'=>$nota->getvTotTrib(),':ISSQNtot'=>$nota->getISSQNtot(),':vISS'=>$nota->getvISS(),':vServ'=>$nota->getvServ(),':retTrib'=>$nota->getretTrib(),':vBCIRRF'=>$nota->getvBCIRRF(),':vBCRetPrev'=>$nota->getvBCRetPrev(),':vIRRF'=>$nota->getvIRRF(),':vRetCOFINS'=>$nota->getvRetCOFINS(),':vRetCSLL'=>$nota->getvRetCSLL(),':vRetPIS'=>$nota->getvRetPIS(),':vRetPrev'=>$nota->getvRetPrev(),':modificado'=>$nota->getmodificado(), );return $params;}}