<?php class CRUDNota extends Dao{ public function insert7(nota $nota){date_default_timezone_set("Brazil/East");$now = mktime (date('H'), date('i'), date('s'), date("m")  , date("d"), date("Y"));$nota->setid(null);$nota->setexcluido(0);$nota->setcriado($now);$sql=$this->criaTabela7('tb_nf');$this->execute7($sql, $nota);$sql = 'INSERT INTO tb_nf (`compl`,`cChaveNFe`,`cCodCateg`,`cModFrete`,`nIdNF`,`nIdPedido`,`nIdReceb`,`nIdTransp`,`ide`,`dCan`,`dEmi`,`dInut`,`dReg`,`dSaiEnt`,`finNFe`,`hEmi`,`hSaiEnt`,`indPag`,`mod`,`nNF`,`serie`,`tpAmb`,`tpNF`,`modificado`,`id`,`excluido`,`criado`) VALUES (:compl,:cChaveNFe,:cCodCateg,:cModFrete,:nIdNF,:nIdPedido,:nIdReceb,:nIdTransp,:ide,:dCan,:dEmi,:dInut,:dReg,:dSaiEnt,:finNFe,:hEmi,:hSaiEnt,:indPag,:mod,:nNF,:serie,:tpAmb,:tpNF,:modificado,:id,:excluido,:criado)';$search = new NotaSearchCriteria();$search->settabela($nota->gettabela());return $this->execute7($sql, $nota);} public function update7(nota $nota){date_default_timezone_set("Brazil/East");$now = mktime (date("H"), date("i"), date("s"), date("m")  , date("d"), date("Y"));$nota->setmodificado($now);$sql = 'UPDATE tb_nf SET id=:id,criado=:criado compl = :compl, cChaveNFe = :cChaveNFe, cCodCateg = :cCodCateg, cModFrete = :cModFrete, nIdNF = :nIdNF, nIdPedido = :nIdPedido, nIdReceb = :nIdReceb, nIdTransp = :nIdTransp, ide = :ide, dCan = :dCan, dEmi = :dEmi, dInut = :dInut, dReg = :dReg, dSaiEnt = :dSaiEnt, finNFe = :finNFe, hEmi = :hEmi, hSaiEnt = :hSaiEnt, indPag = :indPag, mod = :mod, nNF = :nNF, serie = :serie, tpAmb = :tpAmb, tpNF = :tpNF, modificado = :modificado WHERE id = :id ';return $this->execute7($sql, $nota);} public function criaTabela7($tabela){$sql="CREATE TABLE IF NOT EXISTS tb_nf ( `id` INT(5) NOT NULL AUTO_INCREMENT , `criado` INT(100) NULL,`compl` varchar(150) NULL,`cChaveNFe` varchar(150) NULL,`cCodCateg` varchar(150) NULL,`cModFrete` varchar(150) NULL,`nIdNF` varchar(150) NULL,`nIdPedido` varchar(150) NULL,`nIdReceb` varchar(150) NULL,`nIdTransp` varchar(150) NULL,`ide` varchar(150) NULL,`dCan` varchar(150) NULL,`dEmi` varchar(150) NULL,`dInut` varchar(150) NULL,`dReg` varchar(150) NULL,`dSaiEnt` varchar(150) NULL,`finNFe` varchar(150) NULL,`hEmi` varchar(150) NULL,`hSaiEnt` varchar(150) NULL,`indPag` varchar(150) NULL,`mod` varchar(150) NULL,`nNF` varchar(150) NULL,`serie` varchar(150) NULL,`tpAmb` varchar(150) NULL,`tpNF` varchar(150) NULL,`modificado` varchar(150) NULL, `excluido` ENUM('0','1') NOT NULL DEFAULT '0', PRIMARY KEY (`id`)) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci";return $sql;} public function getParams7(nota $nota){$params = array(':id'=>$nota->getid(),':excluido'=>$nota->getexcluido(),':criado'=>$nota->getcriado(),':compl'=>$nota->getcompl(),':cChaveNFe'=>$nota->getcChaveNFe(),':cCodCateg'=>$nota->getcCodCateg(),':cModFrete'=>$nota->getcModFrete(),':nIdNF'=>$nota->getnIdNF(),':nIdPedido'=>$nota->getnIdPedido(),':nIdReceb'=>$nota->getnIdReceb(),':nIdTransp'=>$nota->getnIdTransp(),':ide'=>$nota->getide(),':dCan'=>$nota->getdCan(),':dEmi'=>$nota->getdEmi(),':dInut'=>$nota->getdInut(),':dReg'=>$nota->getdReg(),':dSaiEnt'=>$nota->getdSaiEnt(),':finNFe'=>$nota->getfinNFe(),':hEmi'=>$nota->gethEmi(),':hSaiEnt'=>$nota->gethSaiEnt(),':indPag'=>$nota->getindPag(),':mod'=>$nota->getmod(),':nNF'=>$nota->getnNF(),':serie'=>$nota->getserie(),':tpAmb'=>$nota->gettpAmb(),':tpNF'=>$nota->gettpNF(),':modificado'=>$nota->getmodificado(), );return $params;}}