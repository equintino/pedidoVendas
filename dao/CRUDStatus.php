<?php class CRUDStatus extends Dao{ public function insert8(status $status){date_default_timezone_set("Brazil/East");$now = mktime (date('H'), date('i'), date('s'), date("m")  , date("d"), date("Y"));$status->setid(null);$status->setexcluido(0);$status->setcriado($now);$sql=$this->criaTabela8('tb_status');$this->execute8($sql, $status);$sql = 'INSERT INTO tb_status (`codigo_pedido`,`codigo_pedido_integracao`,`numero_pedido`,`etapa`,`cancelada`,`faturada`,`ambiente`,`valor_total_pedido`,`chave_nfe`,`contingencia`,`danfe`,`data_emissao`,`data_fatura`,`data_saida`,`hora_emissao`,`hora_fatura`,`hora_saida`,`numero_lote`,`numero_nfe`,`protocolo`,`recibo`,`status_lote`,`status_nfe`,`tipo`,`xml_distr`,`modificado`,`dSemana`,`id`,`excluido`,`criado`) VALUES (:codigo_pedido,:codigo_pedido_integracao,:numero_pedido,:etapa,:cancelada,:faturada,:ambiente,:valor_total_pedido,:chave_nfe,:contingencia,:danfe,:data_emissao,:data_fatura,:data_saida,:hora_emissao,:hora_fatura,:hora_saida,:numero_lote,:numero_nfe,:protocolo,:recibo,:status_lote,:status_nfe,:tipo,:xml_distr,:modificado,:dSemana,:id,:excluido,:criado)';$search = new StatusSearchCriteria();$search->settabela($status->gettabela());return $this->execute8($sql, $status);} public function update8(status $status){date_default_timezone_set("Brazil/East");$now = mktime (date("H"), date("i"), date("s"), date("m")  , date("d"), date("Y"));$status->setmodificado($now);$sql = 'UPDATE tb_status SET id=:id,criado=:criado codigo_pedido = :codigo_pedido, codigo_pedido_integracao = :codigo_pedido_integracao, numero_pedido = :numero_pedido, etapa = :etapa, cancelada = :cancelada, faturada = :faturada, ambiente = :ambiente, valor_total_pedido = :valor_total_pedido, chave_nfe = :chave_nfe, contingencia = :contingencia, danfe = :danfe, data_emissao = :data_emissao, data_fatura = :data_fatura, data_saida = :data_saida, hora_emissao = :hora_emissao, hora_fatura = :hora_fatura, hora_saida = :hora_saida, numero_lote = :numero_lote, numero_nfe = :numero_nfe, protocolo = :protocolo, recibo = :recibo, status_lote = :status_lote, status_nfe = :status_nfe, tipo = :tipo, xml_distr = :xml_distr, modificado = :modificado, dSemana = :dSemana WHERE id = :id ';return $this->execute8($sql, $status);} public function criaTabela8($tabela){$sql="CREATE TABLE IF NOT EXISTS tb_status ( `id` INT(5) NOT NULL AUTO_INCREMENT , `criado` INT(100) NULL,`codigo_pedido` varchar(250) NULL,`codigo_pedido_integracao` varchar(250) NULL,`numero_pedido` varchar(250) NULL,`etapa` varchar(250) NULL,`cancelada` varchar(250) NULL,`faturada` varchar(250) NULL,`ambiente` varchar(250) NULL,`valor_total_pedido` varchar(250) NULL,`chave_nfe` varchar(250) NULL,`contingencia` varchar(250) NULL,`danfe` varchar(250) NULL,`data_emissao` varchar(250) NULL,`data_fatura` varchar(250) NULL,`data_saida` varchar(250) NULL,`hora_emissao` varchar(250) NULL,`hora_fatura` varchar(250) NULL,`hora_saida` varchar(250) NULL,`numero_lote` varchar(250) NULL,`numero_nfe` varchar(250) NULL,`protocolo` varchar(250) NULL,`recibo` varchar(250) NULL,`status_lote` varchar(250) NULL,`status_nfe` varchar(250) NULL,`tipo` varchar(250) NULL,`xml_distr` varchar(250) NULL,`modificado` varchar(250) NULL,`dSemana` varchar(250) NULL, `excluido` ENUM('0','1') NOT NULL DEFAULT '0', PRIMARY KEY (`id`)) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci";return $sql;} public function getParams8(status $status){$params = array(':id'=>$status->getid(),':excluido'=>$status->getexcluido(),':criado'=>$status->getcriado(),':codigo_pedido'=>$status->getcodigo_pedido(),':codigo_pedido_integracao'=>$status->getcodigo_pedido_integracao(),':numero_pedido'=>$status->getnumero_pedido(),':etapa'=>$status->getetapa(),':cancelada'=>$status->getcancelada(),':faturada'=>$status->getfaturada(),':ambiente'=>$status->getambiente(),':valor_total_pedido'=>$status->getvalor_total_pedido(),':chave_nfe'=>$status->getchave_nfe(),':contingencia'=>$status->getcontingencia(),':danfe'=>$status->getdanfe(),':data_emissao'=>$status->getdata_emissao(),':data_fatura'=>$status->getdata_fatura(),':data_saida'=>$status->getdata_saida(),':hora_emissao'=>$status->gethora_emissao(),':hora_fatura'=>$status->gethora_fatura(),':hora_saida'=>$status->gethora_saida(),':numero_lote'=>$status->getnumero_lote(),':numero_nfe'=>$status->getnumero_nfe(),':protocolo'=>$status->getprotocolo(),':recibo'=>$status->getrecibo(),':status_lote'=>$status->getstatus_lote(),':status_nfe'=>$status->getstatus_nfe(),':tipo'=>$status->gettipo(),':xml_distr'=>$status->getxml_distr(),':modificado'=>$status->getmodificado(),':dSemana'=>$status->getdSemana(), );return $params;}}