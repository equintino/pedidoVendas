<?php class CRUDPedido extends Dao{ public function insert6(pedido $pedido){date_default_timezone_set("Brazil/East");$now = mktime (date('H'), date('i'), date('s'), date("m")  , date("d"), date("Y"));$pedido->setid(null);$pedido->setexcluido(0);$pedido->setcriado($now);$sql=$this->criaTabela6('tb_pedido');$this->execute6($sql, $pedido);$sql = 'INSERT INTO tb_pedido (`cCliente`,`cliente`,`dPrevisao`,`endereco`,`endereco_numero`,`bairro`,`cidade`,`cep`,`cnpj_cpf`,`tItem`,`mercadorias`,`vDesconto`,`vPedido`,`vendedor`,`cod_vend`,`parcela`,`fPagamento`,`doc`,`transportadora`,`codigo_transportadora`,`tfrete`,`qvolume`,`codigo_categoria`,`codigo_conta_corrente`,`etapa`,`dados_adcionais_nf`,`email`,`codigo_produto`,`descricao`,`quantidade`,`vUnitarioItem`,`pDescontoItem`,`obs_item`,`cfop`,`ncm`,`ean`,`unidade`,`vTotalItem`,`pTabela`,`cOmie`,`numero_parcela`,`data_vencimento`,`valor`,`percentual`,`codigo_pedido`,`pedido`,`codigo_pedido_integracao`,`modificado`,`dSemana`,`id`,`excluido`,`criado`) VALUES (:cCliente,:cliente,:dPrevisao,:endereco,:endereco_numero,:bairro,:cidade,:cep,:cnpj_cpf,:tItem,:mercadorias,:vDesconto,:vPedido,:vendedor,:cod_vend,:parcela,:fPagamento,:doc,:transportadora,:codigo_transportadora,:tfrete,:qvolume,:codigo_categoria,:codigo_conta_corrente,:etapa,:dados_adcionais_nf,:email,:codigo_produto,:descricao,:quantidade,:vUnitarioItem,:pDescontoItem,:obs_item,:cfop,:ncm,:ean,:unidade,:vTotalItem,:pTabela,:cOmie,:numero_parcela,:data_vencimento,:valor,:percentual,:codigo_pedido,:pedido,:codigo_pedido_integracao,:modificado,:dSemana,:id,:excluido,:criado)';$search = new PedidoSearchCriteria();$search->settabela($pedido->gettabela());return $this->execute6($sql, $pedido);} public function update6(pedido $pedido){date_default_timezone_set("Brazil/East");$now = mktime (date("H"), date("i"), date("s"), date("m")  , date("d"), date("Y"));$pedido->setmodificado($now);$sql = 'UPDATE tb_pedido SET id=:id,criado=:criado cCliente = :cCliente, cliente = :cliente, dPrevisao = :dPrevisao, endereco = :endereco, endereco_numero = :endereco_numero, bairro = :bairro, cidade = :cidade, cep = :cep, cnpj_cpf = :cnpj_cpf, tItem = :tItem, mercadorias = :mercadorias, vDesconto = :vDesconto, vPedido = :vPedido, vendedor = :vendedor, cod_vend = :cod_vend, parcela = :parcela, fPagamento = :fPagamento, doc = :doc, transportadora = :transportadora, codigo_transportadora = :codigo_transportadora, tfrete = :tfrete, qvolume = :qvolume, codigo_categoria = :codigo_categoria, codigo_conta_corrente = :codigo_conta_corrente, etapa = :etapa, dados_adcionais_nf = :dados_adcionais_nf, email = :email, codigo_produto = :codigo_produto, descricao = :descricao, quantidade = :quantidade, vUnitarioItem = :vUnitarioItem, pDescontoItem = :pDescontoItem, obs_item = :obs_item, cfop = :cfop, ncm = :ncm, ean = :ean, unidade = :unidade, vTotalItem = :vTotalItem, pTabela = :pTabela, cOmie = :cOmie, numero_parcela = :numero_parcela, data_vencimento = :data_vencimento, valor = :valor, percentual = :percentual, codigo_pedido = :codigo_pedido, pedido = :pedido, codigo_pedido_integracao = :codigo_pedido_integracao, modificado = :modificado, dSemana = :dSemana WHERE id = :id ';return $this->execute6($sql, $pedido);} public function criaTabela6($tabela){$sql="CREATE TABLE IF NOT EXISTS tb_pedido ( `id` INT(5) NOT NULL AUTO_INCREMENT , `criado` INT(100) NULL,`cCliente` varchar(150) NULL,`cliente` varchar(150) NULL,`dPrevisao` varchar(150) NULL,`endereco` varchar(150) NULL,`endereco_numero` varchar(150) NULL,`bairro` varchar(150) NULL,`cidade` varchar(150) NULL,`cep` varchar(150) NULL,`cnpj_cpf` varchar(150) NULL,`tItem` varchar(150) NULL,`mercadorias` varchar(150) NULL,`vDesconto` varchar(150) NULL,`vPedido` varchar(150) NULL,`vendedor` varchar(150) NULL,`cod_vend` varchar(150) NULL,`parcela` varchar(150) NULL,`fPagamento` varchar(150) NULL,`doc` varchar(150) NULL,`transportadora` varchar(150) NULL,`codigo_transportadora` varchar(150) NULL,`tfrete` varchar(150) NULL,`qvolume` varchar(150) NULL,`codigo_categoria` varchar(150) NULL,`codigo_conta_corrente` varchar(150) NULL,`etapa` varchar(150) NULL,`dados_adcionais_nf` varchar(150) NULL,`email` varchar(150) NULL,`codigo_produto` varchar(150) NULL,`descricao` varchar(150) NULL,`quantidade` varchar(150) NULL,`vUnitarioItem` varchar(150) NULL,`pDescontoItem` varchar(150) NULL,`obs_item` varchar(150) NULL,`cfop` varchar(150) NULL,`ncm` varchar(150) NULL,`ean` varchar(150) NULL,`unidade` varchar(150) NULL,`vTotalItem` varchar(150) NULL,`pTabela` varchar(150) NULL,`cOmie` varchar(150) NULL,`numero_parcela` varchar(150) NULL,`data_vencimento` varchar(150) NULL,`valor` varchar(150) NULL,`percentual` varchar(150) NULL,`codigo_pedido` varchar(150) NULL,`pedido` varchar(150) NULL,`codigo_pedido_integracao` varchar(150) NULL,`modificado` varchar(150) NULL,`dSemana` varchar(150) NULL, `excluido` ENUM('0','1') NOT NULL DEFAULT '0', PRIMARY KEY (`id`)) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci";return $sql;} public function getParams6(pedido $pedido){$params = array(':id'=>$pedido->getid(),':excluido'=>$pedido->getexcluido(),':criado'=>$pedido->getcriado(),':cCliente'=>$pedido->getcCliente(),':cliente'=>$pedido->getcliente(),':dPrevisao'=>$pedido->getdPrevisao(),':endereco'=>$pedido->getendereco(),':endereco_numero'=>$pedido->getendereco_numero(),':bairro'=>$pedido->getbairro(),':cidade'=>$pedido->getcidade(),':cep'=>$pedido->getcep(),':cnpj_cpf'=>$pedido->getcnpj_cpf(),':tItem'=>$pedido->gettItem(),':mercadorias'=>$pedido->getmercadorias(),':vDesconto'=>$pedido->getvDesconto(),':vPedido'=>$pedido->getvPedido(),':vendedor'=>$pedido->getvendedor(),':cod_vend'=>$pedido->getcod_vend(),':parcela'=>$pedido->getparcela(),':fPagamento'=>$pedido->getfPagamento(),':doc'=>$pedido->getdoc(),':transportadora'=>$pedido->gettransportadora(),':codigo_transportadora'=>$pedido->getcodigo_transportadora(),':tfrete'=>$pedido->gettfrete(),':qvolume'=>$pedido->getqvolume(),':codigo_categoria'=>$pedido->getcodigo_categoria(),':codigo_conta_corrente'=>$pedido->getcodigo_conta_corrente(),':etapa'=>$pedido->getetapa(),':dados_adcionais_nf'=>$pedido->getdados_adcionais_nf(),':email'=>$pedido->getemail(),':codigo_produto'=>$pedido->getcodigo_produto(),':descricao'=>$pedido->getdescricao(),':quantidade'=>$pedido->getquantidade(),':vUnitarioItem'=>$pedido->getvUnitarioItem(),':pDescontoItem'=>$pedido->getpDescontoItem(),':obs_item'=>$pedido->getobs_item(),':cfop'=>$pedido->getcfop(),':ncm'=>$pedido->getncm(),':ean'=>$pedido->getean(),':unidade'=>$pedido->getunidade(),':vTotalItem'=>$pedido->getvTotalItem(),':pTabela'=>$pedido->getpTabela(),':cOmie'=>$pedido->getcOmie(),':numero_parcela'=>$pedido->getnumero_parcela(),':data_vencimento'=>$pedido->getdata_vencimento(),':valor'=>$pedido->getvalor(),':percentual'=>$pedido->getpercentual(),':codigo_pedido'=>$pedido->getcodigo_pedido(),':pedido'=>$pedido->getpedido(),':codigo_pedido_integracao'=>$pedido->getcodigo_pedido_integracao(),':modificado'=>$pedido->getmodificado(),':dSemana'=>$pedido->getdSemana(), );return $params;}}